<section class="jumbotron text-center mt-4">
  <div class="container">
    <h1 class="jumbotron-heading" *ngIf="rows">{{ rows[0].week_id + ". Hafta" }} | Haftalık Faaliyet Raporu</h1>

    <p class="lead text-muted">Değerli çalışanımız, raporu vaktinde göndermeyi ihmal etmeyinizTeşekkür ederiz.<br>
      <span *ngIf="!rows" class="badge badge-danger">⛔ Boş Rapor</span>
    </p>
  </div>
</section>


<h6>HAFTALIK FAALİYETLER</h6>
<table class="table table-striped  table-hover ">
  <thead class="thead">
    <tr>
      <th>Sıra</th>
      <th>Kod</th>
      <!-- <th>Pipe Kod</th> -->
      <th>Önem</th>
      <th class="col-md-4">
        <div class="row">
          <span class="col-md-4">Aksiyonlar </span>
          <span class="col-md-4"><mat-icon matTooltip="Cool" class="col-md-1">help_outline</mat-icon></span>
          
        </div>
      </th>
      <th>
        <div class="row">
          <span class="col-md-7">Başlangıç</span>
          <mat-icon matTooltip="Cool" class="col-md-1">help_outline</mat-icon>
        </div>
      </th>
      <th>
        <div class="row">
          <span class="col-md-4">Bitiş</span>
          <mat-icon matTooltip="Cool" class="col-md-1">help_outline</mat-icon>
        </div>
      </th>

      <th>
        <div class="row ">
          <span class="col-md-7">Talep</span>
          <span class="col-md-7">Sahibi</span>
          <mat-icon matTooltip="Cool" class="col-md-1">help_outline</mat-icon>
        </div>
      </th>
      <th>
        <div class="row ">
          <span class="col-md-7">Planlanan</span>
          <span class="col-md-7">Tarih </span>
          <mat-icon matTooltip="Cool" class="col-md-1">help_outline</mat-icon>
        </div>
      </th>
      <th>
        <div class="row ">
          <span class="col-md-7">Aşım</span>
          <mat-icon matTooltip="Cool" class="col-md-1">help_outline</mat-icon>
        </div>
      </th>
      <th>
        <div class="row ">
          <span class="col-md-7">Harcanan</span>
          <span class="col-md-7">Saat</span>
          <mat-icon matTooltip="Cool" class="col-md-1">help_outline</mat-icon>
        </div>
      </th>
      <th>
        <div class="row ">
          <span class="col-md-7">Durumu</span>
          <mat-icon matTooltip="Cool" class="col-md-1">help_outline</mat-icon>
        </div>
      </th>
      <th class="col-md-3">
        <div class="row  ">
          <span class="col-md-7">Yorumlar</span>
          <span class="col-md-7">Öneriler</span>
          <mat-icon matTooltip="Cool" class="col-md-1">help_outline</mat-icon>
        </div>
      </th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let row of rows; let i = index">
      <th scope="row">
        <button *ngIf="gmLoginStatus" (click)="revisionRequest(row.code)" id="codeButton"
          class="btn btn-outline-dark btn-sm"> {{i + 1}}:
          revizyon iste
        </button>
      </th>
      <td>{{row.code}}</td>
      <!-- <td>{{row.code | vatAdded: 10 | currency:'₺'}}</td> -->
      <td [style.color]="setColor(row.matter+1)" class="font-weight-bolder">{{row.matter+1}}</td>
      <td>{{row.actions}}</td>
      <td>{{row.start_date | date: 'dd/MM/yyyy'}}</td>
      <td>{{row.finish_date | date: 'dd/MM/yyyy'}}</td>
      <td>{{row.claimants}}</td>
      <td>{{row.scheduled_completion_date | date: 'dd/MM/yyyy'}}</td>
      <td>{{row.is_timeout ? "evet":"hayır"}}</td>
      <td>{{row.weekly_time_spent}}</td>
      <td>{{row.status}}</td>
      <td>{{row.comments}}</td>
    </tr>
  </tbody>
</table>

<!-- && gmLoginStatus -->
<br><br>
<div class="mt-5" *ngIf="!reportSendStatus&&!gmLoginStatus">
  <div class="addRow">
    <p class="bg-light h4 pl-2">satır ekle</p>
    <form [formGroup]="rowForm">
      <table class="table ">
        <thead>
          <tr>
            <th class="col-md-2">Talep Durumu</th>
            <th class="col-md-3">Talep Tarihleri</th>
            <th class="col-md-3">Talep Süresi</th>
            <th class="col-md-4">Alınan Aksiyonlar</th>
          </tr>
        </thead>
        <tbody>

          <tr>
            <td class="bg-light">
              <div class="form-group row">
                <label for="form-weekly-time-spent" class="col-4 ">Talep Sahibi</label>
                <div class="col-8">
                  <input formControlName="claimants" id="claimants" name="claimants" type="text" class="form-control">
                </div>
              </div>
              <div class="form-group row ">
                <label for="" class="col-4 col-form-label">Önem Derecesi</label>
                <div class="col-8">
                  <select formControlName="matter" id="matter" name="matter" class="custom-select">
                    <option value="1">Çok Düşük</option>
                    <option value="2">Düşük</option>
                    <option value="3">Normal</option>
                    <option value="4">Yüksek</option>
                    <option value="5">Çok Yüksek</option>
                  </select>
                </div>
              </div>
              <div class="form-group row ">
                <label for="" class="col-4 col-form-label">İş Durumu</label>
                <div class="col-8">
                  <select formControlName="status" id="status" name="status" class="custom-select">
                    <option value="Devam Ediyor">Devam Ediyor</option>
                    <option value="Bitti">Bitti</option>
                    <option value="Kapandı">Kapandı</option>
                    <option value="İptal Edildi">İptal Edildi</option>
                  </select>
                </div>
              </div>
            </td>
            <td class="bg-light">

              <div class="row ml-2">
                <input class="col-md-6" formControlName="start_date" matInput [matDatepicker]="picker1">
                <mat-datepicker-toggle class="col-md-2 bg-dark pr-5" matSuffix [for]="picker1"></mat-datepicker-toggle>
                <p class="col-md-12 ">Başlangıç Tarihi</p>
                <mat-datepicker #picker1></mat-datepicker>
              </div>
              <!-- -->
              <div class="row ml-2">
                <input class="col-md-6" formControlName="scheduled_completion_date" matInput [matDatepicker]="picker2">
                <mat-datepicker-toggle class="col-md-2 bg-dark pr-5" matSuffix [for]="picker2"></mat-datepicker-toggle>
                <p class="col-md-12 ">Planlanmış Bitirme Tarihi</p>
                <mat-datepicker #picker2></mat-datepicker>
              </div>
              <!-- -->
              <div class="row ml-2">
                <input class="col-md-6" formControlName="finish_date" matInput [matDatepicker]="picker3">
                <mat-datepicker-toggle class="col-md-2 bg-dark pr-5" matSuffix [for]="picker3"></mat-datepicker-toggle>
                <p class="col-md-12 ">Bitirme Tarihi</p>
                <mat-datepicker #picker3></mat-datepicker>
              </div>
              <!-- -->
            </td>
            <td class="bg-light">
              <div class="form-group row">
                <div class="col-md-12">
                  <input formControlName="weekly_time_spent" id="form-time-spent" placeholder="Haftalık Harcanan Süre"
                    name="form-time-spent" type="text" class="form-control">
                </div>
              </div>
              <!-- -->
              <div class="form-group row ">
                <div class="col-md-1">
                  <select formControlName="is_timeout" id="is_timeout" name="is_timeout" class="custom-select">
                    <option value="Var">Var</option>
                    <option value="Yok">Yok</option>
                  </select>
                </div>
                <label for="" class="col-md-7 col-form-label">Süre Aşımı Var Mı</label>
              </div>
              <div class="form-group row">
                <div class="col-md-12">
                  <textarea formControlName="comments" placeholder="Yorumlar / Öneriler" id="comments" name="comments"
                    cols="40" rows="3" class="form-control"></textarea>
                </div>
              </div>
            </td>
            <td class="bg-light">
              <div class="form-group row">
                <div class="col-12">
                  <textarea formControlName="actions" placeholder="Yapılan İşler / Aksiyonlar" id="actions"
                    name="actions" cols="40" rows="8" class="form-control"></textarea>
                </div>
              </div>
              <div class="form-group row float-right mt-4 mr-1">
                <button (click)="addRow()" name="submit" type="submit" class="btn btn-primary">Satırı Ekle</button>
              </div>
            </td>

          </tr>

        </tbody>

      </table>


    </form>
  </div>
  <div class="rowSendButton">
    <button (click)="sendWorkerWeeklyReport()" class="btn btn-success">Haftalık Raporumu Gönder</button>
  </div>
</div>